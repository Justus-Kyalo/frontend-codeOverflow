{"ast":null,"code":"import csrfFetch from \"./csrf\";\nexport const RECEIVE_TAGS = \"tags/RECEIVE_TAGS\";\nexport const RECEIVE_TAG = \"tags/RECEIVE_TAG\";\nexport const REMOVE_TAG = \"tags/REMOVE_TAG\";\nexport const receiveTags = tags => ({\n  type: RECEIVE_TAGS,\n  tags\n});\nexport const receiveTag = tag => ({\n  type: RECEIVE_TAG,\n  tag\n});\nexport const removeTag = tagId => ({\n  type: REMOVE_TAG,\n  tagId\n});\nexport const getTag = tagId => _ref => {\n  let {\n    tags\n  } = _ref;\n  return tags ? tags[tagId] : null;\n};\nexport const getTags = _ref2 => {\n  let {\n    tags\n  } = _ref2;\n  return tags ? Object.values(tags) : [];\n};\nexport const fetchTag = tagId => async dispatch => {\n  const res = await csrfFetch(`/api/tags/${tagId}`);\n  const data = await res.json();\n  dispatch(receiveTag(data.tag));\n};\nexport const fetchTags = () => async dispatch => {\n  const res = await csrfFetch(`/api/tags`);\n  const data = await res.json();\n  dispatch(receiveTags(data));\n};\nexport const deleteTag = tagId => async dispatch => {\n  await csrfFetch(`/api/tags/${tagId}`, {\n    method: \"DELETE\"\n  });\n  dispatch(removeTag(tagId));\n};\nexport const updateTag = tag => async dispatch => {\n  const res = await csrfFetch(`/api/tags/${tag.id}`, {\n    method: 'PUT',\n    body: JSON.stringify(tag),\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n  const data = await res.json();\n  dispatch(receiveTag(data));\n};\nconst tagsReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  Object.freeze(state);\n  const nextState = {\n    ...state\n  };\n  switch (action.type) {\n    case RECEIVE_TAGS:\n      return {\n        ...state,\n        ...action.tags\n      };\n    case RECEIVE_TAG:\n      nextState[action.tag.id] = action.tag;\n      return nextState;\n    case REMOVE_TAG:\n      delete nextState[action.tagId];\n      return nextState;\n    default:\n      return state;\n  }\n};\nexport default tagsReducer;","map":{"version":3,"names":["csrfFetch","RECEIVE_TAGS","RECEIVE_TAG","REMOVE_TAG","receiveTags","tags","type","receiveTag","tag","removeTag","tagId","getTag","_ref","getTags","_ref2","Object","values","fetchTag","dispatch","res","data","json","fetchTags","deleteTag","method","updateTag","id","body","JSON","stringify","headers","tagsReducer","state","arguments","length","undefined","action","freeze","nextState"],"sources":["/home/john/development/frontend/src/store/tags.js"],"sourcesContent":["import csrfFetch from \"./csrf\";\n\nexport const RECEIVE_TAGS = \"tags/RECEIVE_TAGS\";\nexport const RECEIVE_TAG = \"tags/RECEIVE_TAG\";\nexport const REMOVE_TAG = \"tags/REMOVE_TAG\";\n\nexport const receiveTags = tags => ({\n    type: RECEIVE_TAGS,\n    tags\n});\n\nexport const receiveTag = tag => ({\n    type: RECEIVE_TAG,\n    tag\n});\n\nexport const removeTag = tagId => ({\n    type: REMOVE_TAG,\n    tagId\n});\n\nexport const getTag = tagId => ({tags}) => tags ? tags[tagId] : null;\nexport const getTags = ({tags}) => tags ? Object.values(tags) : [];\n\nexport const fetchTag = tagId => async dispatch => {\n    const res = await csrfFetch(`/api/tags/${tagId}`);\n    const data = await res.json();\n    dispatch(receiveTag(data.tag));\n};\n\nexport const fetchTags = () => async dispatch => {\n    const res = await csrfFetch(`/api/tags`);\n    const data = await res.json();\n    dispatch(receiveTags(data));\n};\n\nexport const deleteTag = tagId => async dispatch => {\n    await csrfFetch(`/api/tags/${tagId}`, {method: \"DELETE\"});\n    dispatch(removeTag(tagId));\n};\n\nexport const updateTag = tag => async dispatch => {\n    const res = await csrfFetch(`/api/tags/${tag.id}`, {\n      method: 'PUT',\n      body: JSON.stringify(tag),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n    const data = await res.json();\n    dispatch(receiveTag(data));\n  };\n\nconst tagsReducer = (state= {}, action) => {\n    Object.freeze(state);\n    const nextState = {...state};\n    switch (action.type) {\n        case RECEIVE_TAGS:\n            return {...state, ...action.tags};\n        case RECEIVE_TAG:\n            nextState[action.tag.id] = action.tag;\n            return nextState;\n        case REMOVE_TAG:\n            delete nextState[action.tagId];\n            return nextState;\n        default:\n            return state;\n    }\n};\n\nexport default tagsReducer;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}