{"ast":null,"code":"import csrfFetch from \"./csrf\";\nexport const RECEIVE_ANSWERS = \"answers/RECEIVE_ANSWERS\";\nexport const RECEIVE_ANSWER = \"answers/RECEIVE_ANSWER\";\nexport const REMOVE_ANSWER = \"answers/REMOVE_ANSWER\";\nexport const receiveAnswers = answers => ({\n  type: RECEIVE_ANSWERS,\n  answers\n});\nexport const receiveAnswer = answer => ({\n  type: RECEIVE_ANSWER,\n  answer\n});\nexport const removeAnswer = answerId => ({\n  type: REMOVE_ANSWER,\n  answerId\n});\nexport const getAnswer = answerId => _ref => {\n  let {\n    answers\n  } = _ref;\n  return answers ? answers[answerId] : null;\n};\nexport const getAnswers = _ref2 => {\n  let {\n    answers\n  } = _ref2;\n  return answers ? Object.values(answers) : [];\n};\nexport const fetchAnswer = answerId => async dispatch => {\n  const res = await csrfFetch(`/api/answers/${answerId}`);\n  const data = await res.json();\n  dispatch(receiveAnswer(data.answer));\n};\nexport const fetchAnswers = questionId => async dispatch => {\n  const res = await csrfFetch(`/api/answers`);\n  const data = await res.json();\n  dispatch(receiveAnswers(data));\n};\nexport const deleteAnswer = answerId => async dispatch => {\n  await csrfFetch(`/api/answers/${answerId}`, {\n    method: \"DELETE\"\n  });\n  dispatch(removeAnswer(answerId));\n};\nexport const updateAnswer = answer => async dispatch => {\n  const res = await csrfFetch(`/api/answers/${answer.id}`, {\n    method: 'PUT',\n    body: JSON.stringify(answer),\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n  const data = await res.json();\n  dispatch(receiveAnswer(data));\n};\nconst answersReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  Object.freeze(state);\n  const nextState = {\n    ...state\n  };\n  switch (action.type) {\n    case RECEIVE_ANSWERS:\n      return {\n        ...state,\n        ...action.answers\n      };\n    case RECEIVE_ANSWER:\n      nextState[action.answer.id] = action.answer;\n      return nextState;\n    case REMOVE_ANSWER:\n      delete nextState[action.answerId];\n      return nextState;\n    default:\n      return state;\n  }\n};\nexport default answersReducer;","map":{"version":3,"names":["csrfFetch","RECEIVE_ANSWERS","RECEIVE_ANSWER","REMOVE_ANSWER","receiveAnswers","answers","type","receiveAnswer","answer","removeAnswer","answerId","getAnswer","_ref","getAnswers","_ref2","Object","values","fetchAnswer","dispatch","res","data","json","fetchAnswers","questionId","deleteAnswer","method","updateAnswer","id","body","JSON","stringify","headers","answersReducer","state","arguments","length","undefined","action","freeze","nextState"],"sources":["/home/john/development/frontend-codeOverflow/src/store/answers.js"],"sourcesContent":["import csrfFetch from \"./csrf\";\n\nexport const RECEIVE_ANSWERS = \"answers/RECEIVE_ANSWERS\";\nexport const RECEIVE_ANSWER = \"answers/RECEIVE_ANSWER\";\nexport const REMOVE_ANSWER = \"answers/REMOVE_ANSWER\";\n\nexport const receiveAnswers = answers => ({\n    type: RECEIVE_ANSWERS,\n    answers\n});\n\nexport const receiveAnswer = answer => ({\n    type: RECEIVE_ANSWER,\n    answer\n});\n\nexport const removeAnswer = answerId => ({\n    type: REMOVE_ANSWER,\n    answerId\n});\n\nexport const getAnswer = answerId => ({answers}) => answers ? answers[answerId] : null;\nexport const getAnswers = ({answers}) => answers ? Object.values(answers) : [];\n\n\nexport const fetchAnswer = answerId => async dispatch => {\n    const res = await csrfFetch(`/api/answers/${answerId}`);\n    const data = await res.json();\n    dispatch(receiveAnswer(data.answer));\n};\n\nexport const fetchAnswers = (questionId) => async dispatch => {\n    const res = await csrfFetch(`/api/answers`);\n    const data = await res.json();\n    dispatch(receiveAnswers(data));\n};\n\nexport const deleteAnswer = answerId => async dispatch => {\n    await csrfFetch(`/api/answers/${answerId}`, {method: \"DELETE\"});\n    dispatch(removeAnswer(answerId));\n};\n\nexport const updateAnswer = answer => async dispatch => {\n    const res = await csrfFetch(`/api/answers/${answer.id}`, {\n      method: 'PUT',\n      body: JSON.stringify(answer),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n    const data = await res.json();\n    dispatch(receiveAnswer(data));\n  };\n\n\nconst answersReducer = (state= {}, action) => {\n    Object.freeze(state);\n    const nextState = {...state};\n    switch (action.type) {\n        case RECEIVE_ANSWERS:\n            return {...state, ...action.answers};\n        case RECEIVE_ANSWER:\n            nextState[action.answer.id] = action.answer;\n            return nextState;\n        case REMOVE_ANSWER:\n            delete nextState[action.answerId];\n            return nextState;\n        default:\n            return state;\n    }\n};\n\nexport default answersReducer;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}